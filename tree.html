<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='content-type'>
    <title></title>
    <script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
    <script src="newick.js" type="text/javascript"></script>
	 <body>
<!-- Copyright 2011 Jason Davies https://github.com/jasondavies/newick.js -->
<script>function parseNewick(a){for(var e=[],r={},s=a.split(/\s*(;|\(|\)|,|:)\s*/),t=0;t<s.length;t++){var n=s[t];switch(n){case"(":var c={};r.branchset=[c],e.push(r),r=c;break;case",":var c={};e[e.length-1].branchset.push(c),r=c;break;case")":r=e.pop();break;case":":break;default:var h=s[t-1];")"==h||"("==h||","==h?r.name=n:":"==h&&(r.length=parseFloat(n))}}return r}</script>
	
    <script>
		var width = 900;
		var height = 1200;   
		var vis = d3.select("body").append("svg")
			.attr("width" , width)
			.attr("height", height)
			.append("g")
				.attr("transform", "translate(50, 50)");
		  
		d3.text("Euk.txt", function(error, euk) {
			if (error) throw error;
		  
		var tree = d3.layout.cluster()
			.size([width-100, height-100])
			.children(function(d) { return d.branchset; });
		var root = parseNewick(euk);
		console.log(root);
		root.parent = {x:0, y:0};
		console.log(root);

		var nodes = tree.nodes(root);
		
		function adjustLength(n, offset) {
			  if (n.length != null) offset += n.length * 155;
			  n.y = offset;
			  if (n.children)
				n.children.forEach(function(n) {
				  adjustLength(n, offset);
				});
		}
		
		
		adjustLength(nodes[0], 0);
		
		var links = tree.links(nodes);

		var	rightAngleDiagonal = function rightAngleDiagonal(d, i) {
			return "M" + d.source.y + "," + d.source.x
			+ "V" + d.target.x + "H" + d.target.y;
			}
		vis.selectAll(".link")
			.data(links)
			.enter()
			.append("path")
			.attr("class", "link")
			.attr("fill", "none")
			.attr("stroke", "black")
			.attr("d", rightAngleDiagonal);	
		
		var node = vis.selectAll(".node")
			.data(nodes)
			.enter()
			.append("g")
				.attr("class", "node")
				.attr("transform", function (d) {console.log(d); return "translate(" + d.y + "," + d.x + ")";});
		node.append("circle")
			.attr("r", 2)
			.attr("fill", "dodgerblue");
		
	
      });
    </script>
    <style type="text/css" media="screen">
      body { font-family: "Helvetica Neue", Helvetica, sans-serif; }
      td { vertical-align: top; }
    </style>
  </head>
 
    
  </body>
</html>